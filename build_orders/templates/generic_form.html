{% extends "base.html" %}

{% macro render_field(field) %}
<div>
    <dd>{{ field(placeholder = field.label.text, **kwargs)|safe }}
        {% if field.errors %}
        <ul class='error'>
            {% for error in field.errors %}<li>{{ error }}</li>{% endfor %}
        </ul>
        {% endif %}
    </dd>
    <dt>{{ field.label }}</dt>
    {% if field.description %}
    <dd>
        {{ field.description }}
    </dd>
    {% endif %}
</div>
{% endmacro %}

{% block main %}
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class='row'>
        {% for message in messages %}
        <p class='error'>{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <div>
        <form method='post' action='{{ request.path }}'>
            <dl>
                {% for field in form %}
                {{ render_field(field) }}
                {% endfor %}
            </dl>
            <div>
                <input type='submit' value='submit'/>
            </div>
        </form>
    </div>

{% endblock %}
